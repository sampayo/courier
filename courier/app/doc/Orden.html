<?xml version="1.0" encoding="utf-8"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN"
	"http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en">
<head>
	<meta content="text/html; charset=utf-8" http-equiv="Content-Type" />

	<title>Class: Orden</title>

	<link rel="stylesheet" href="./rdoc.css" type="text/css" media="screen" />

	<script src="./js/jquery.js" type="text/javascript"
		charset="utf-8"></script>
	<script src="./js/thickbox-compressed.js" type="text/javascript"
		charset="utf-8"></script>
	<script src="./js/quicksearch.js" type="text/javascript"
		charset="utf-8"></script>
	<script src="./js/darkfish.js" type="text/javascript"
		charset="utf-8"></script>

</head>
<body class="class">

	<div id="metadata">
		<div id="home-metadata">
			<div id="home-section" class="section">
        <h3 class="section-header">
          <a href="./index.html">Home</a>
          <a href="./index.html#classes">Classes</a>
          <a href="./index.html#methods">Methods</a>
        </h3>
			</div>
		</div>

		<div id="file-metadata">
			<div id="file-list-section" class="section">
				<h3 class="section-header">In Files</h3>
				<div class="section-body">
					<ul>
					
						<li><a href="./models/orden_rb.html?TB_iframe=true&amp;height=550&amp;width=785"
							class="thickbox" title="models/orden.rb">models/orden.rb</a></li>
					
					</ul>
				</div>
			</div>

			
		</div>

		<div id="class-metadata">

			<!-- Parent Class -->
			
			<div id="parent-class-section" class="section">
				<h3 class="section-header">Parent</h3>
				
				<p class="link">ActiveRecord::Base</p>
				
			</div>
			

			<!-- Namespace Contents -->
			

			<!-- Method Quickref -->
			
			<div id="method-list-section" class="section">
				<h3 class="section-header">Methods</h3>
				<ul class="link-list">
					
					<li><a href="#method-c-direcciones">::direcciones</a></li>
					
					<li><a href="#method-c-notificaciones">::notificaciones</a></li>
					
					<li><a href="#method-c-rutaRecolectada">::rutaRecolectada</a></li>
					
					<li><a href="#method-c-rutas">::rutas</a></li>
					
					<li><a href="#method-c-validarCliente">::validarCliente</a></li>
					
					<li><a href="#method-c-validarDireccion">::validarDireccion</a></li>
					
					<li><a href="#method-c-validarOrdenRemota">::validarOrdenRemota</a></li>
					
					<li><a href="#method-c-validarPaquete">::validarPaquete</a></li>
					
					<li><a href="#method-c-validarRemota">::validarRemota</a></li>
					
					<li><a href="#method-c-validarrecoleccion">::validarrecoleccion</a></li>
					
					<li><a href="#method-c-validartarjeta">::validartarjeta</a></li>
					
				</ul>
			</div>
			

			<!-- Included Modules -->
			
		</div>

		<div id="project-metadata">
			
			

			<div id="classindex-section" class="section project-section">
				<h3 class="section-header">Class Index
					<span class="search-toggle"><img src="./images/find.png"
						height="16" width="16" alt="[+]"
						title="show/hide quicksearch" /></span></h3>
				<form action="#" method="get" accept-charset="utf-8" class="initially-hidden">
				<fieldset>
					<legend>Quicksearch</legend>
					<input type="text" name="quicksearch" value=""
						class="quicksearch-field" />
				</fieldset>
				</form>

				<ul class="link-list">
				
					<li><a href="./EnviarHelper.html">EnviarHelper</a></li>
				
					<li><a href="./EnviarHelper/Direcciones.html">EnviarHelper::Direcciones</a></li>
				
					<li><a href="./AdminController.html">AdminController</a></li>
				
					<li><a href="./AdminHelper.html">AdminHelper</a></li>
				
					<li><a href="./ApplicationController.html">ApplicationController</a></li>
				
					<li><a href="./ApplicationHelper.html">ApplicationHelper</a></li>
				
					<li><a href="./CompaniaController.html">CompaniaController</a></li>
				
					<li><a href="./CompaniaHelper.html">CompaniaHelper</a></li>
				
					<li><a href="./Companium.html">Companium</a></li>
				
					<li><a href="./CourierController.html">CourierController</a></li>
				
					<li><a href="./CourierHelper.html">CourierHelper</a></li>
				
					<li><a href="./Courierucab.html">Courierucab</a></li>
				
					<li><a href="./Customlog.html">Customlog</a></li>
				
					<li><a href="./Despachar.html">Despachar</a></li>
				
					<li><a href="./DespacharController.html">DespacharController</a></li>
				
					<li><a href="./DespacharHelper.html">DespacharHelper</a></li>
				
					<li><a href="./Direccion.html">Direccion</a></li>
				
					<li><a href="./DireccionsController.html">DireccionsController</a></li>
				
					<li><a href="./DireccionsHelper.html">DireccionsHelper</a></li>
				
					<li><a href="./Empleado.html">Empleado</a></li>
				
					<li><a href="./EmpleadosController.html">EmpleadosController</a></li>
				
					<li><a href="./EmpleadosHelper.html">EmpleadosHelper</a></li>
				
					<li><a href="./Enviar.html">Enviar</a></li>
				
					<li><a href="./EnviarController.html">EnviarController</a></li>
				
					<li><a href="./ErrorsController.html">ErrorsController</a></li>
				
					<li><a href="./Factura.html">Factura</a></li>
				
					<li><a href="./FacturasController.html">FacturasController</a></li>
				
					<li><a href="./FacturasHelper.html">FacturasHelper</a></li>
				
					<li><a href="./Giancourier.html">Giancourier</a></li>
				
					<li><a href="./Historico.html">Historico</a></li>
				
					<li><a href="./HistoricosController.html">HistoricosController</a></li>
				
					<li><a href="./HistoricosHelper.html">HistoricosHelper</a></li>
				
					<li><a href="./Orden.html">Orden</a></li>
				
					<li><a href="./OrdensController.html">OrdensController</a></li>
				
					<li><a href="./OrdensHelper.html">OrdensHelper</a></li>
				
					<li><a href="./Paquete.html">Paquete</a></li>
				
					<li><a href="./PaquetesController.html">PaquetesController</a></li>
				
					<li><a href="./PaquetesHelper.html">PaquetesHelper</a></li>
				
					<li><a href="./Persona.html">Persona</a></li>
				
					<li><a href="./PersonasController.html">PersonasController</a></li>
				
					<li><a href="./PersonasHelper.html">PersonasHelper</a></li>
				
					<li><a href="./RecolectarController.html">RecolectarController</a></li>
				
					<li><a href="./RecolectarHelper.html">RecolectarHelper</a></li>
				
					<li><a href="./ServiceController.html">ServiceController</a></li>
				
					<li><a href="./ServiceHelper.html">ServiceHelper</a></li>
				
					<li><a href="./TipoPago.html">TipoPago</a></li>
				
					<li><a href="./TipoPagosController.html">TipoPagosController</a></li>
				
					<li><a href="./TipoPagosHelper.html">TipoPagosHelper</a></li>
				
				</ul>
				<div id="no-class-search-results" style="display: none;">No matching classes.</div>
			</div>

			
		</div>
	</div>

	<div id="documentation">
		<h1 class="class">Orden</h1>

		<div id="description">
			
		</div>

		<!-- Constants -->
		

		<!-- Attributes -->
		

		<!-- Methods -->
		
		<div id="public-class-method-details" class="method-section section">
			<h3 class="section-header">Public Class Methods</h3>

		
			<div id="direcciones-method" class="method-detail ">
				<a name="method-c-direcciones"></a>

				<div class="method-heading">
				
					<span class="method-name">direcciones</span><span
						class="method-args">(id, nombre)</span>
					<span class="method-click-advice">click to toggle source</span>
				
				</div>

				<div class="method-description">
					
					<p>
Metodo valida que las direcciones pasandole un id, y el nombre univoco,
para la data traida del xml.
</p>
					

					
					<div class="method-source-code"
						id="direcciones-source">
<pre>
     <span class="ruby-comment cmt"># File models/orden.rb, line 123</span>
123:   <span class="ruby-keyword kw">def</span> <span class="ruby-keyword kw">self</span>.<span class="ruby-identifier">direcciones</span>(<span class="ruby-identifier">id</span>, <span class="ruby-identifier">nombre</span>)
124:     <span class="ruby-keyword kw">return</span> <span class="ruby-constant">Direccion</span>.<span class="ruby-identifier">find_by_sql</span>(<span class="ruby-value str">&quot;select * from historicos h, direccions d where d.id=h.direccions_id and h.tipo='&quot;</span> <span class="ruby-operator">+</span> <span class="ruby-identifier">nombre</span> <span class="ruby-operator">+</span> <span class="ruby-value str">&quot;' and h.ordens_id=&quot;</span> <span class="ruby-operator">+</span> <span class="ruby-identifier">id</span>.<span class="ruby-identifier">to_s</span>).<span class="ruby-identifier">first</span>
125:   <span class="ruby-keyword kw">end</span></pre>
					</div>
					
				</div>

				

				
			</div>

		
			<div id="notificaciones-method" class="method-detail ">
				<a name="method-c-notificaciones"></a>

				<div class="method-heading">
				
					<span class="method-name">notificaciones</span><span
						class="method-args">()</span>
					<span class="method-click-advice">click to toggle source</span>
				
				</div>

				<div class="method-description">
					
					<p>
metodo que busca las ordenes que se encuentran pendientes por notificar.
Que tengan cargo extra de otra compania
</p>
					

					
					<div class="method-source-code"
						id="notificaciones-source">
<pre>
     <span class="ruby-comment cmt"># File models/orden.rb, line 128</span>
128:   <span class="ruby-keyword kw">def</span> <span class="ruby-keyword kw">self</span>.<span class="ruby-identifier">notificaciones</span>
129:     <span class="ruby-keyword kw">return</span> <span class="ruby-constant">Factura</span>.<span class="ruby-identifier">find_by_sql</span>(<span class="ruby-value str">'select o.*, f.costoTotal from ordens o , facturas f where f.ordens_id=o.id and o.notificacion = &quot;alerta&quot;'</span>)
130:   <span class="ruby-keyword kw">end</span></pre>
					</div>
					
				</div>

				

				
			</div>

		
			<div id="ruta-ecolectada-method" class="method-detail ">
				<a name="method-c-rutaRecolectada"></a>

				<div class="method-heading">
				
					<span class="method-name">rutaRecolectada</span><span
						class="method-args">(orden)</span>
					<span class="method-click-advice">click to toggle source</span>
				
				</div>

				<div class="method-description">
					
					<p>
Metodo que valida la ruta de recoleccion, se busca la ruta pasandole una
orden y se le cambia el estado a la orden a recolectada una vez que se haya
ejecutado el metodo e inmediatamente se guarda en el historico.
</p>
					

					
					<div class="method-source-code"
						id="ruta-ecolectada-source">
<pre>
    <span class="ruby-comment cmt"># File models/orden.rb, line 20</span>
20:   <span class="ruby-keyword kw">def</span> <span class="ruby-keyword kw">self</span>.<span class="ruby-identifier">rutaRecolectada</span>(<span class="ruby-identifier">orden</span>)
21:     <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">orden</span>.<span class="ruby-identifier">estado</span> <span class="ruby-operator">!=</span> <span class="ruby-value str">&quot;Recolectada&quot;</span>
22:       <span class="ruby-identifier">orden</span>.<span class="ruby-identifier">estado</span> = <span class="ruby-value str">&quot;Recolectada&quot;</span>
23:       <span class="ruby-identifier">orden</span>.<span class="ruby-identifier">empleado_id</span> = <span class="ruby-keyword kw">nil</span>
24:       <span class="ruby-ivar">@historico</span> = <span class="ruby-constant">Historico</span>.<span class="ruby-identifier">where</span>(<span class="ruby-value">:ordens_id</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-identifier">orden</span>.<span class="ruby-identifier">id</span>, <span class="ruby-value">:tipo</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-value str">&quot;Recolectada&quot;</span>).<span class="ruby-identifier">first</span>
25:       <span class="ruby-ivar">@historico</span>.<span class="ruby-identifier">fecha</span> = <span class="ruby-constant">Time</span>.<span class="ruby-identifier">now</span>
26:       <span class="ruby-identifier">orden</span>.<span class="ruby-identifier">save</span>
27:       <span class="ruby-ivar">@historico</span>.<span class="ruby-identifier">save</span>
28:       <span class="ruby-keyword kw">return</span> <span class="ruby-value str">&quot;La orden se ha recolectado con exito&quot;</span>
29:     <span class="ruby-keyword kw">else</span>
30:       <span class="ruby-keyword kw">return</span> <span class="ruby-value str">&quot;La orden ya fue recolectada en otro momento&quot;</span>
31:     <span class="ruby-keyword kw">end</span>
32:   <span class="ruby-keyword kw">end</span></pre>
					</div>
					
				</div>

				

				
			</div>

		
			<div id="rutas-method" class="method-detail ">
				<a name="method-c-rutas"></a>

				<div class="method-heading">
				
					<span class="method-name">rutas</span><span
						class="method-args">(id)</span>
					<span class="method-click-advice">click to toggle source</span>
				
				</div>

				<div class="method-description">
					
					<p>
Muestra las rutas de la de la orden buscandolas por un id en la tabla
historico
</p>
					

					
					<div class="method-source-code"
						id="rutas-source">
<pre>
    <span class="ruby-comment cmt"># File models/orden.rb, line 13</span>
13:   <span class="ruby-keyword kw">def</span> <span class="ruby-keyword kw">self</span>.<span class="ruby-identifier">rutas</span>(<span class="ruby-identifier">id</span>)
14:     <span class="ruby-keyword kw">return</span> <span class="ruby-constant">Historico</span>.<span class="ruby-identifier">find_by_sql</span>(<span class="ruby-value str">'Select h.fecha, h.tipo , d.*, h.id as idHistorico from historicos h, direccions d where h.direccions_id=d.id and h.fecha is not null and h.ordens_id='</span> <span class="ruby-operator">+</span> <span class="ruby-identifier">id</span>.<span class="ruby-identifier">to_s</span> <span class="ruby-operator">+</span> <span class="ruby-value str">' order by h.fecha DESC'</span>)
15:   <span class="ruby-keyword kw">end</span></pre>
					</div>
					
				</div>

				

				
			</div>

		
			<div id="validar-liente-method" class="method-detail ">
				<a name="method-c-validarCliente"></a>

				<div class="method-heading">
				
					<span class="method-name">validarCliente</span><span
						class="method-args">(cliente)</span>
					<span class="method-click-advice">click to toggle source</span>
				
				</div>

				<div class="method-description">
					
					<p>
metodo valida todos los campos cliente, mediante el id del mismo pasado por
parametros de estar en la base de datos, revisa que el campo no este vacio.
</p>
					

					
					<div class="method-source-code"
						id="validar-liente-source">
<pre>
    <span class="ruby-comment cmt"># File models/orden.rb, line 36</span>
36:   <span class="ruby-keyword kw">def</span> <span class="ruby-keyword kw">self</span>.<span class="ruby-identifier">validarCliente</span>(<span class="ruby-identifier">cliente</span>)
37:     <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">cliente</span>[<span class="ruby-value">:email</span>].<span class="ruby-identifier">nil?</span>
38:       <span class="ruby-keyword kw">return</span> <span class="ruby-keyword kw">nil</span>
39:     <span class="ruby-keyword kw">else</span>
40:       <span class="ruby-ivar">@cliente</span> = <span class="ruby-constant">Persona</span>.<span class="ruby-identifier">where</span>(<span class="ruby-value">:email</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-identifier">cliente</span>[<span class="ruby-value">:email</span>]).<span class="ruby-identifier">first</span>
41:       <span class="ruby-keyword kw">if</span> <span class="ruby-ivar">@cliente</span>.<span class="ruby-identifier">nil?</span>
42:         <span class="ruby-keyword kw">return</span> <span class="ruby-keyword kw">nil</span>
43:       <span class="ruby-keyword kw">else</span>
44:       <span class="ruby-keyword kw">return</span> <span class="ruby-ivar">@cliente</span>.<span class="ruby-identifier">id</span>
45:       <span class="ruby-keyword kw">end</span>
46:     <span class="ruby-keyword kw">end</span>
47:   <span class="ruby-keyword kw">end</span></pre>
					</div>
					
				</div>

				

				
			</div>

		
			<div id="validar-ireccion-method" class="method-detail ">
				<a name="method-c-validarDireccion"></a>

				<div class="method-heading">
				
					<span class="method-name">validarDireccion</span><span
						class="method-args">(direccion)</span>
					<span class="method-click-advice">click to toggle source</span>
				
				</div>

				<div class="method-description">
					
					<p>
metodo valida todos los campos direccion que ninguno que se este pasando
por el xml este vacio.
</p>
					

					
					<div class="method-source-code"
						id="validar-ireccion-source">
<pre>
    <span class="ruby-comment cmt"># File models/orden.rb, line 51</span>
51:   <span class="ruby-keyword kw">def</span> <span class="ruby-keyword kw">self</span>.<span class="ruby-identifier">validarDireccion</span>(<span class="ruby-identifier">direccion</span>)
52:     <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">direccion</span>[<span class="ruby-value">:nombre</span>].<span class="ruby-identifier">nil?</span> <span class="ruby-keyword kw">or</span> <span class="ruby-identifier">direccion</span>[<span class="ruby-value">:avCalle</span>].<span class="ruby-identifier">nil?</span> <span class="ruby-keyword kw">or</span> <span class="ruby-identifier">direccion</span>[<span class="ruby-value">:resCasa</span>].<span class="ruby-identifier">nil?</span> <span class="ruby-keyword kw">or</span> <span class="ruby-identifier">direccion</span>[<span class="ruby-value">:aptoNumero</span>].<span class="ruby-identifier">nil?</span> <span class="ruby-keyword kw">or</span> <span class="ruby-identifier">direccion</span>[<span class="ruby-value">:urban</span>].<span class="ruby-identifier">nil?</span> <span class="ruby-keyword kw">or</span> <span class="ruby-identifier">direccion</span>[<span class="ruby-value">:ciudad</span>].<span class="ruby-identifier">nil?</span> <span class="ruby-keyword kw">or</span> <span class="ruby-identifier">direccion</span>[<span class="ruby-value">:pais</span>].<span class="ruby-identifier">nil?</span> <span class="ruby-keyword kw">or</span> <span class="ruby-identifier">direccion</span>[<span class="ruby-value">:cPostal</span>].<span class="ruby-identifier">nil?</span> <span class="ruby-keyword kw">or</span> <span class="ruby-identifier">direccion</span>[<span class="ruby-value">:lat</span>].<span class="ruby-identifier">nil?</span> <span class="ruby-keyword kw">or</span> <span class="ruby-identifier">direccion</span>[<span class="ruby-value">:lng</span>].<span class="ruby-identifier">nil?</span>
53:     <span class="ruby-keyword kw">return</span> <span class="ruby-keyword kw">false</span>
54:     <span class="ruby-keyword kw">else</span>
55:     <span class="ruby-keyword kw">return</span> <span class="ruby-keyword kw">true</span>
56:     <span class="ruby-keyword kw">end</span>
57:   <span class="ruby-keyword kw">end</span></pre>
					</div>
					
				</div>

				

				
			</div>

		
			<div id="validar-rden-emota-method" class="method-detail ">
				<a name="method-c-validarOrdenRemota"></a>

				<div class="method-heading">
				
					<span class="method-name">validarOrdenRemota</span><span
						class="method-args">(orden)</span>
					<span class="method-click-advice">click to toggle source</span>
				
				</div>

				<div class="method-description">
					
					<p>
metodo valida todos los campos orden, recibidos en el xml, para que estos
no sean vacios dependiendo de los mismo retorna un booleano.
</p>
					

					
					<div class="method-source-code"
						id="validar-rden-emota-source">
<pre>
    <span class="ruby-comment cmt"># File models/orden.rb, line 61</span>
61:   <span class="ruby-keyword kw">def</span> <span class="ruby-keyword kw">self</span>.<span class="ruby-identifier">validarOrdenRemota</span>(<span class="ruby-identifier">orden</span>)
62:     <span class="ruby-keyword kw">if</span>  <span class="ruby-identifier">orden</span>[<span class="ruby-value">:nombre</span>].<span class="ruby-identifier">nil?</span> <span class="ruby-keyword kw">or</span> <span class="ruby-identifier">orden</span>[<span class="ruby-value">:apellido</span>].<span class="ruby-identifier">nil?</span> <span class="ruby-keyword kw">or</span> <span class="ruby-identifier">orden</span>[<span class="ruby-value">:fecha</span>].<span class="ruby-identifier">nil?</span>
63:     <span class="ruby-keyword kw">return</span> <span class="ruby-keyword kw">false</span>
64:     <span class="ruby-keyword kw">else</span>
65:     <span class="ruby-keyword kw">return</span> <span class="ruby-keyword kw">true</span>
66:     <span class="ruby-keyword kw">end</span>
67:   <span class="ruby-keyword kw">end</span></pre>
					</div>
					
				</div>

				

				
			</div>

		
			<div id="validar-aquete-method" class="method-detail ">
				<a name="method-c-validarPaquete"></a>

				<div class="method-heading">
				
					<span class="method-name">validarPaquete</span><span
						class="method-args">(paquete)</span>
					<span class="method-click-advice">click to toggle source</span>
				
				</div>

				<div class="method-description">
					
					<p>
metodo valida todos los campos paquete, recibidos en el xml, para que estos
no sean vacios dependiendo de los mismo retorna un booleano.
</p>
					

					
					<div class="method-source-code"
						id="validar-aquete-source">
<pre>
    <span class="ruby-comment cmt"># File models/orden.rb, line 71</span>
71:   <span class="ruby-keyword kw">def</span> <span class="ruby-keyword kw">self</span>.<span class="ruby-identifier">validarPaquete</span>(<span class="ruby-identifier">paquete</span>)
72:     <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">paquete</span>[<span class="ruby-value">:peso</span>].<span class="ruby-identifier">nil?</span> <span class="ruby-keyword kw">or</span> <span class="ruby-identifier">paquete</span>[<span class="ruby-value">:nombre</span>].<span class="ruby-identifier">nil?</span> <span class="ruby-keyword kw">or</span> <span class="ruby-identifier">paquete</span>[<span class="ruby-value">:descripcion</span>].<span class="ruby-identifier">nil?</span>  <span class="ruby-keyword kw">or</span> <span class="ruby-identifier">paquete</span>[<span class="ruby-value">:peso</span>].<span class="ruby-identifier">to_i</span><span class="ruby-operator">&lt;=</span><span class="ruby-value">0</span>
73:     <span class="ruby-keyword kw">return</span> <span class="ruby-keyword kw">false</span>
74:     <span class="ruby-keyword kw">else</span>
75:     <span class="ruby-keyword kw">return</span> <span class="ruby-keyword kw">true</span>
76:     <span class="ruby-keyword kw">end</span>
77:   <span class="ruby-keyword kw">end</span></pre>
					</div>
					
				</div>

				

				
			</div>

		
			<div id="validar-emota-method" class="method-detail ">
				<a name="method-c-validarRemota"></a>

				<div class="method-heading">
				
					<span class="method-name">validarRemota</span><span
						class="method-args">(xml)</span>
					<span class="method-click-advice">click to toggle source</span>
				
				</div>

				<div class="method-description">
					
					<p>
metodo valida todos los campos de la orden remota, recibidos en el xml,
para que estos no sean vacios dependiendo de los mismo retorna un booleano.
</p>
					

					
					<div class="method-source-code"
						id="validar-emota-source">
<pre>
     <span class="ruby-comment cmt"># File models/orden.rb, line 111</span>
111:   <span class="ruby-keyword kw">def</span> <span class="ruby-keyword kw">self</span>.<span class="ruby-identifier">validarRemota</span>(<span class="ruby-identifier">xml</span>)
112:     <span class="ruby-ivar">@cli</span> = <span class="ruby-identifier">validarCliente</span>(<span class="ruby-identifier">xml</span>[<span class="ruby-value">:cliente</span>])
113:     <span class="ruby-ivar">@tar</span> = <span class="ruby-identifier">validartarjeta</span>(<span class="ruby-identifier">xml</span>[<span class="ruby-value">:tarjeta</span>])
114:     <span class="ruby-ivar">@dir</span> = <span class="ruby-identifier">validarrecoleccion</span>(<span class="ruby-identifier">xml</span>[<span class="ruby-value">:direccionrecoleccion</span>])
115:     <span class="ruby-keyword kw">if</span> <span class="ruby-operator">!</span>(<span class="ruby-ivar">@cli</span>.<span class="ruby-identifier">nil?</span>) <span class="ruby-keyword kw">and</span> <span class="ruby-identifier">validarOrdenRemota</span>(<span class="ruby-identifier">xml</span>[<span class="ruby-value">:orden</span>]) <span class="ruby-keyword kw">and</span> <span class="ruby-identifier">validarPaquete</span>(<span class="ruby-identifier">xml</span>[<span class="ruby-value">:paquete</span>]) <span class="ruby-keyword kw">and</span> <span class="ruby-identifier">validarDireccion</span>(<span class="ruby-identifier">xml</span>[<span class="ruby-value">:direccionentrega</span>]) <span class="ruby-keyword kw">and</span> <span class="ruby-operator">!</span>(<span class="ruby-ivar">@dir</span>.<span class="ruby-identifier">nil?</span>) <span class="ruby-keyword kw">and</span> <span class="ruby-operator">!</span>(<span class="ruby-ivar">@tar</span>.<span class="ruby-identifier">nil?</span>)
116:       <span class="ruby-keyword kw">return</span> [<span class="ruby-ivar">@cli</span>,<span class="ruby-ivar">@tar</span>,<span class="ruby-ivar">@dir</span>]
117:     <span class="ruby-keyword kw">else</span>
118:       <span class="ruby-keyword kw">return</span> <span class="ruby-keyword kw">nil</span>
119:     <span class="ruby-keyword kw">end</span>
120:   <span class="ruby-keyword kw">end</span></pre>
					</div>
					
				</div>

				

				
			</div>

		
			<div id="validarrecoleccion-method" class="method-detail ">
				<a name="method-c-validarrecoleccion"></a>

				<div class="method-heading">
				
					<span class="method-name">validarrecoleccion</span><span
						class="method-args">(direccion)</span>
					<span class="method-click-advice">click to toggle source</span>
				
				</div>

				<div class="method-description">
					
					<p>
metodo valida todos los campos de la recoleccion, recibidos en el xml, para
que estos no sean vacios dependiendo de los mismo retorna un booleano.
tambien busca que estos no sean vacios en la base de datos.
</p>
					

					
					<div class="method-source-code"
						id="validarrecoleccion-source">
<pre>
     <span class="ruby-comment cmt"># File models/orden.rb, line 96</span>
 96:   <span class="ruby-keyword kw">def</span> <span class="ruby-keyword kw">self</span>.<span class="ruby-identifier">validarrecoleccion</span>(<span class="ruby-identifier">direccion</span>)
 97:     <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">direccion</span>[<span class="ruby-value">:nombre</span>].<span class="ruby-identifier">nil?</span>
 98:       <span class="ruby-keyword kw">return</span> <span class="ruby-keyword kw">nil</span>
 99:     <span class="ruby-keyword kw">else</span>
100:       <span class="ruby-ivar">@cliente</span> = <span class="ruby-constant">Direccion</span>.<span class="ruby-identifier">where</span>(<span class="ruby-value">:nombre</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-identifier">direccion</span>[<span class="ruby-value">:nombre</span>]).<span class="ruby-identifier">first</span>
101:       <span class="ruby-keyword kw">if</span> <span class="ruby-ivar">@cliente</span>.<span class="ruby-identifier">nil?</span>
102:         <span class="ruby-keyword kw">return</span> <span class="ruby-keyword kw">nil</span>
103:       <span class="ruby-keyword kw">else</span>
104:       <span class="ruby-keyword kw">return</span> <span class="ruby-ivar">@cliente</span>.<span class="ruby-identifier">id</span>
105:       <span class="ruby-keyword kw">end</span>
106:     <span class="ruby-keyword kw">end</span>
107:   <span class="ruby-keyword kw">end</span></pre>
					</div>
					
				</div>

				

				
			</div>

		
			<div id="validartarjeta-method" class="method-detail ">
				<a name="method-c-validartarjeta"></a>

				<div class="method-heading">
				
					<span class="method-name">validartarjeta</span><span
						class="method-args">(tarjeta)</span>
					<span class="method-click-advice">click to toggle source</span>
				
				</div>

				<div class="method-description">
					
					<p>
metodo valida todos los campos tarjeta, recibidos en el xml, para que estos
no sean vacios dependiendo de los mismo retorna un booleano.
</p>
					

					
					<div class="method-source-code"
						id="validartarjeta-source">
<pre>
    <span class="ruby-comment cmt"># File models/orden.rb, line 81</span>
81:   <span class="ruby-keyword kw">def</span> <span class="ruby-keyword kw">self</span>.<span class="ruby-identifier">validartarjeta</span>(<span class="ruby-identifier">tarjeta</span>)
82:     <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">tarjeta</span>[<span class="ruby-value">:nTDC</span>].<span class="ruby-identifier">nil?</span>
83:       <span class="ruby-keyword kw">return</span> <span class="ruby-keyword kw">nil</span>
84:     <span class="ruby-keyword kw">else</span>
85:       <span class="ruby-ivar">@cliente</span> = <span class="ruby-constant">TipoPago</span>.<span class="ruby-identifier">where</span>(<span class="ruby-value">:nTDC</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-identifier">tarjeta</span>[<span class="ruby-value">:nTDC</span>]).<span class="ruby-identifier">first</span>
86:       <span class="ruby-keyword kw">if</span> <span class="ruby-ivar">@cliente</span>.<span class="ruby-identifier">nil?</span>
87:         <span class="ruby-keyword kw">return</span> <span class="ruby-keyword kw">nil</span>
88:       <span class="ruby-keyword kw">else</span>
89:       <span class="ruby-keyword kw">return</span> <span class="ruby-ivar">@cliente</span>.<span class="ruby-identifier">id</span>
90:       <span class="ruby-keyword kw">end</span>
91:     <span class="ruby-keyword kw">end</span>
92:   <span class="ruby-keyword kw">end</span></pre>
					</div>
					
				</div>

				

				
			</div>

		
		</div>
	

	</div>


	<div id="rdoc-debugging-section-dump" class="debugging-section">
	
		<p>Disabled; run with --debug to generate this.</p>
	
	</div>

	<div id="validator-badges">
		<p><small><a href="http://validator.w3.org/check/referer">[Validate]</a></small></p>
		<p><small>Generated with the <a href="http://deveiate.org/projects/Darkfish-Rdoc/">Darkfish
			Rdoc Generator</a> 1.1.6</small>.</p>
	</div>

</body>
</html>

